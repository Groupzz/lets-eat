<!DOCTYPE html>
<html>
    <head>
        <title>Welcome, <%=usersDataPack.username%></title>
        <link rel="stylesheet" href="/stylesheets/accountInterface.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <script>
            function logoff() {
                window.location.href = '/logout';
            }
            function ajaxChange(dest, id){
                $.ajax({
                    type: "GET",
                    url: window.location + "/" + dest + "?id=" + id,
                    success: function (result) {
                        if(dest == "home"){
                            $(".HomeModal").fadeIn()
                            $(".PersonalInformationModal").hide();
                            $(".FriendsModal").hide();
                            $(".PreferencesModal").hide();
                            $(".BookmarkModal").hide();
                        }
                        if(dest == "personalinfo"){
                            $(".HomeModal").hide();
                            $(".PersonalInformationModal").fadeIn();
                            $(".FriendsModal").hide();
                            $(".PreferencesModal").hide();
                            $(".BookmarkModal").hide();
                        }
                        if(dest == "friends"){
                            $(".HomeModal").hide();
                            $(".PersonalInformationModal").hide();
                            $(".FriendsModal").fadeIn();
                            $(".PreferencesModal").hide();
                            $(".BookmarkModal").hide();
                        }
                        if(dest == "preferences"){
                            $(".HomeModal").hide();
                            $(".PersonalInformationModal").hide();
                            $(".FriendsModal").hide();
                            $(".PreferencesModal").fadeIn();
                            $(".BookmarkModal").hide();
                        }
                        if(dest == "bookmark"){
                            $(".HomeModal").hide();
                            $(".PersonalInformationModal").hide();
                            $(".FriendsModal").hide();
                            $(".PreferencesModal").hide();
                            $(".BookmarkModal").fadeIn();
                        }
                    },
                    error: function(e) {
                        console.log("ERROR: ",e);
                    }
                });
            }
            $(document).ready(function() {
                // Modals of each section
                $(".PersonalInformationModal").hide();
                $(".FriendsModal").hide();
                $(".PreferencesModal").hide();
                $(".BookmarkModal").hide();
                // Buttons to each modal in the side menu
                $("#HomeButton").click(function() {
                    ajaxChange("home", <%=usersDataPack.docID%>);
                });
                $("#PersonalButton").click(function() {
                   ajaxChange("personalinfo", <%=usersDataPack.docID%>);
                });
                $("#FriendsButton").click(function() {
                   ajaxChange("friends", <%=usersDataPack.docID%>);
                });
                $("#PreferencesButton").click(function() {
                    ajaxChange("preferences", <%=usersDataPack.docID%>);
                });
                $("#BookmarkButton").click(function() {
                   ajaxChange("bookmark", <%=usersDataPack.docID%>);
                });
            })
        </script>
    </head>
    
    <body>
        <img src="/images/logo2.gif" alt="Logo" class="center" style="padding-left: 30px; padding-bottom: 50px;"> <!-- for logo -->
        
        <!-- Slideshow container -->
        <div class="slideshow-container">
        
          <div class="mySlides fade">
            <div class="numbertext">1 / 3</div>
            <img src='./images/img_american.jpg' style="width:100%">
            <div class="text">Caption One</div>
          </div>
        
          <div class="mySlides fade">
            <div class="numbertext">2 / 3</div>
            <img src='./images/img_chinese.jpg' style="width:100%">
            <div class="text">Caption Two</div>
          </div>
        
          <div class="mySlides fade">
            <div class="numbertext">3 / 3</div>
            <img src='./images/img_indian.jpg' style="width:100%">
            <div class="text">Caption Three</div>
          </div>
        
          <!-- Next and previous buttons -->
          <a class="prev" onclick="plusSlides(-1)">&#10094;</a>
          <a class="next" onclick="plusSlides(1)">&#10095;</a>
        </div>
        <br>
        
        <!-- The dots/circles -->
        <div style="text-align:center">
          <span class="dot" onclick="currentSlide(1)"></span> 
          <span class="dot" onclick="currentSlide(2)"></span> 
          <span class="dot" onclick="currentSlide(3)"></span> 
        </div>
        
        <!---Formats the sign up information box--->
        <form method="POST" action="http://104.237.158.50:8080/registerUser">
        <div class="box">
        <h1><center>Personal Info</center></h1>
    
        <!--User info-->
        <label for="username">Username: </label><input type="text" name="Username" value="" onFocus="field_focus(this, 'Username');" onblur="field_blur(this, 'Username');" class="Username" required/><br>
        <label for="first name">First Name: </label><input type="text" name="FirstName" value="" onFocus="field_focus(this, 'First Name');" onblur="field_blur(this, 'First Name');" class="First Name" required/><br>
        <label for="last name">Last Name: </label><input type="text" name="LastName" value="" onFocus="field_focus(this, 'Last Name');" onblur="field_blur(this, 'Last Name');" class="Last Name" required/><br>
        <label for="email">E-mail: </label><input type="Email" name="Email" value="" onFocus="field_focus(this, 'Email');" onblur="field_blur(this, 'Email');" class="Email" required/><br>
        <label for="password">Password: </label><input type="Password" name="Password" value="" onFocus="field_focus(this, 'Password');" onblur="field_blur(this, 'Password');" class="Password" required id="myPw"/><br>
        <input type="checkbox" onclick="hidePassword()">Show Password<br>
        <label for="city">City: </label><input type="text" name="City" value="" onFocus="field_focus(this, 'City');" onblur="field_blur(this, 'City');" class="City" required/><br>
        <label for="state">State: </label><input type="text" name="State" value="" onFocus="field_focus(this, 'State');" onblur="field_blur(this, 'State');" class="State" required/><br>
        <label for="secq">Security Question: </label><input type="text" name="SecurityQuestion" value="" onFocus="field_focus(this, 'Security Question');" onblur="field_blur(this, 'Security Question');" class="Security Question" required/><br>
        <label for="answer">Answer:</label><input type="Password" name="Answer" value="" onFocus="field_focus(this, 'Answer');" onblur="field_blur(this, 'Answer');" class="Answer" required id="myAns"/><br>
        <input type="checkbox" onclick="hideAnswer()">Show Answer<br>
        </div>
        
        <div class="wrapper">
            <div class="HomeModal">
                <span>HOME</span>
            </div>
            <div class="PersonalInformationModal">
                <span>PERSONAL INFORMATION</span>
            </div>
            <div class="FriendsModal">

            </div>
            <div class="PreferencesModal">

            </div>
            <div class="BookmarkModal">

            </div>
            <button onclick="logoff()">Log Out</button>

        </div>
        
        <div class="sidenav">
            <a href="#Home">Home</a>
            <a href="#Personal Info">Personal Info</a>
            <a href="#Friends">Friends</a>
            <a href="#Preferences">Preferences</a>
            <a href="#Bookmarks">Bookmarks</a
            <a href="#Logout">Logout</a
        </div>
        
        <script>
        var slideIndex = 1;
        showSlides(slideIndex);
        
        function plusSlides(n) {
          showSlides(slideIndex += n);
        }
        
        function currentSlide(n) {
          showSlides(slideIndex = n);
        }
        
        function showSlides(n) {
          var i;
          var slides = document.getElementsByClassName("mySlides");
          var dots = document.getElementsByClassName("dot");
          if (n > slides.length) {slideIndex = 1}    
          if (n < 1) {slideIndex = slides.length}
          for (i = 0; i < slides.length; i++) {
              slides[i].style.display = "none";  
          }
          for (i = 0; i < dots.length; i++) {
              dots[i].className = dots[i].className.replace(" active", "");
          }
          slides[slideIndex-1].style.display = "block";  
          dots[slideIndex-1].className += " active";
        }
        
        function hidePassword() {
            var x = document.getElementById("myPw");
            if (x.type === "password") {
              x.type = "text";
            } else {
              x.type = "password";
            }
        }
        
        function hideAnswer() {
            var x = document.getElementById("myAns");
            if (x.type === "password") {
              x.type = "text";
            } else {
              x.type = "password";
            }
        }
        </script>
        
    </body>
</html>
