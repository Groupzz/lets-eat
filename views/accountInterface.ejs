<!DOCTYPE html>
<html>
    <head>
        <title>Welcome, <%=usersDataPack.username%></title>
        <link rel="stylesheet" href="/stylesheets/accountInterface.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <script>
            function logoff() {
                window.location.href = '/logout';
            }
            function ajaxChange(dest, id){
                $.ajax({
                    type: "GET",
                    url: window.location + "/" + dest + "?id=" + id,
                    success: function (result) {
                        if(dest == "home"){
                            $(".HomeModal").fadeIn()
                            $(".PersonalInformationModal").hide();
                            $(".FriendsModal").hide();
                            $(".PreferencesModal").hide();
                            $(".BookmarkModal").hide();
                        }
                        if(dest == "personalinfo"){
                            $(".HomeModal").hide();
                            $(".PersonalInformationModal").fadeIn();
                            $(".FriendsModal").hide();
                            $(".PreferencesModal").hide();
                            $(".BookmarkModal").hide();
                        }
                        if(dest == "friends"){
                            $(".HomeModal").hide();
                            $(".PersonalInformationModal").hide();
                            $(".FriendsModal").fadeIn();
                            $(".PreferencesModal").hide();
                            $(".BookmarkModal").hide();
                        }
                        if(dest == "preferences"){
                            $(".HomeModal").hide();
                            $(".PersonalInformationModal").hide();
                            $(".FriendsModal").hide();
                            $(".PreferencesModal").fadeIn();
                            $(".BookmarkModal").hide();
                        }
                        if(dest == "bookmark"){
                            $(".HomeModal").hide();
                            $(".PersonalInformationModal").hide();
                            $(".FriendsModal").hide();
                            $(".PreferencesModal").hide();
                            $(".BookmarkModal").fadeIn();
                        }
                    },
                    error: function(e) {
                        console.log("ERROR: ",e);
                    }
                });
            }
            $(document).ready(function() {
                // Modals of each section
                $(".PersonalInformationModal").hide();
                $(".FriendsModal").hide();
                $(".PreferencesModal").hide();
                $(".BookmarkModal").hide();
                // Buttons to each modal in the side menu
                $("#HomeButton").click(function() {
                    ajaxChange("home", <%=usersDataPack.docID%>);
                });
                $("#PersonalButton").click(function() {
                   ajaxChange("personalinfo", <%=usersDataPack.docID%>);
                });
                $("#FriendsButton").click(function() {
                   ajaxChange("friends", <%=usersDataPack.docID%>);
                });
                $("#PreferencesButton").click(function() {
                    ajaxChange("preferences", <%=usersDataPack.docID%>);
                });
                $("#BookmarkButton").click(function() {
                   ajaxChange("bookmark", <%=usersDataPack.docID%>);
                });
            })
        </script>
    </head>
    
    <body>
        <img src="/images/logo2.gif" alt="Logo" class="center" style="padding-left: 30px; padding-bottom: 50px;"> <!-- for logo -->
        
        <!-- Slideshow container -->
        <div class="slideshow-container">
        
          <div class="mySlides fade">
            <div class="numbertext">1 / 3</div>
            <img src='/images/img_american.jpg' style="width:100%">
            <div class="text">Caption One</div>
          </div>
        
          <div class="mySlides fade">
            <div class="numbertext">2 / 3</div>
            <img src='/images/img_chinese.jpg' style="width:100%">
            <div class="text">Caption Two</div>
          </div>
        
          <div class="mySlides fade">
            <div class="numbertext">3 / 3</div>
            <img src='/images/img_indian.jpg' style="width:100%">
            <div class="text">Caption Three</div>
          </div>
        
          <!-- Next and previous buttons -->
          <a class="prev" onclick="plusSlides(-1)">&#10094;</a>
          <a class="next" onclick="plusSlides(1)">&#10095;</a>
        </div>
        <br>
        
        <!-- The dots/circles -->
        <div style="text-align:center">
          <span class="dot" onclick="currentSlide(1)"></span> 
          <span class="dot" onclick="currentSlide(2)"></span> 
          <span class="dot" onclick="currentSlide(3)"></span> 
        </div>
        
        <div class="wrapper">
            <div class="HomeModal">
                <span>HOME</span>
            </div>
            <div class="PersonalInformationModal">
                <span>PERSONAL INFORMATION</span>
            </div>
            <div class="FriendsModal">

            </div>
            <div class="PreferencesModal">

            </div>
            <div class="BookmarkModal">

            </div>
            <button onclick="logoff()">Log Out</button>

        </div>
        
        <div class="sidenav">
            <a href="#Home">Home</a>
            <a href="#Personal Info">Personal Info</a>
            <a href="#Friends">Friends</a>
            <a href="#Preferences">Preferences</a>
            <a href="#Bookmarks">Bookmarks</a
            <a href="#Logout">Logout</a
        </div>
        
        <script>
        var slideIndex = 1;
        showSlides(slideIndex);
        
        function plusSlides(n) {
          showSlides(slideIndex += n);
        }
        
        function currentSlide(n) {
          showSlides(slideIndex = n);
        }
        
        function showSlides(n) {
          var i;
          var slides = document.getElementsByClassName("mySlides");
          var dots = document.getElementsByClassName("dot");
          if (n > slides.length) {slideIndex = 1}    
          if (n < 1) {slideIndex = slides.length}
          for (i = 0; i < slides.length; i++) {
              slides[i].style.display = "none";  
          }
          for (i = 0; i < dots.length; i++) {
              dots[i].className = dots[i].className.replace(" active", "");
          }
          slides[slideIndex-1].style.display = "block";  
          dots[slideIndex-1].className += " active";
        }
        </script>
        
    </body>
</html>
